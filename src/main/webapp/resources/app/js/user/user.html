<div ui-view>
  <navbar-directive>
  </navbar-directive>
  <div class="row nav-bar-spacer" style="margin-bottom: 2rem;">
    <div class="columns large-1">
      <img class="user-image-large" ng-src="{{userInfo.imageUrl}}">
    </div>
    <div class="columns large-11">
      <h1>{{::user.firstName}} {{::user.lastName}}</h1>
    </div>
  </div>
  <div ng-show="!datasetsLoaded" class="row">
    <div class="column center large-12">
      <i class="fa fa-spinner fa-spin fa-3x"></i>
      <p>Loading datasets...
      </p>
    </div>
  </div>
  <div class="row" ng-show="datasetsLoaded">
    <div class="columns large-12">
      <h3>Datasets</h3>
      <button tabindex="0" class="button small" ng-click="createDatasetDialog()"><i class="fa fa-plus"></i> Add new dataset</button>
    </div>
    <div class="columns large-12">
      <table>
        <tr>
          <th class="large-3">Name</th>
          <th class="large-9">Description</th>
        </tr>
        <tr ng-repeat="dataset in datasets">
          <td>
            <a ui-sref="versionedDataset({userUid: userUid, datasetUUID: stripFrontFilter(dataset.datasetUri, 'http://trials.drugis.org/datasets/'), 
                               versionUuid: stripFrontFilter(dataset.headVersion, versionUrlBase)})">{{dataset.label}}</a></td>
          <td>{{dataset.comment}}</td>
        </tr>
      </table>
    </div>
  </div>
  <div class="row">
    <div class="columns large-12">
      <h3>Other users</h3>
    </div>
    <div class="columns large-12">
      <ul class="no-bullet">
        <li ng-cloak class="ng-cloak" ng-show="!users.length"><em>You are the only user of trialverse</em></li>
        <li ng-repeat="otherUser in users">
          <a>
            <img class="user-image-large" ng-src="{{userInfo.imageUrl}}"> {{::otherUser.firstName}} {{::otherUser.lastName}}
          </a>
        </li>
      </ul>
    </div>
  </div>
</div>
