<form novalidate>
  <div class="row">
    <div class="large-9 columns">
      <h3>Edit {{itemType}}</h3>
    </div>
  </div>
  <div class="row">
    <div class="large-9 columns">
      <label>Name
        <input autofocus type="text" ng-model="item.label">
      </label>
    </div>
  </div>
  <div class="row">
    <div class="large-12 columns">
      <label>Measurement type</label>
      <input ng-model="item.measurementType" type="radio" name="measurementType" ng-change="resetResultProperties()"
        value="ontology:dichotomous" id="rateOption">
      <label for="rateOption">count</label>
      <input ng-model="item.measurementType" type="radio" name="measurementType" ng-change="resetResultProperties()"
        value="ontology:continuous" id="continuousOption">
      <label for="continuousOption">continuous</label>
      <input ng-model="item.measurementType" type="radio" name="measurementType" ng-change="resetResultProperties()"
        value="ontology:categorical" id="categoricalOption">
      <label for="categoricalOption">categorical</label>
    </div>
  </div>

  <div class="row" ng-if="item.measurementType==='ontology:categorical'">
    <div class="large-9 columns">
      <label>Categories</label>
      <div class="row" ng-repeat="category in item.categoryList">
        <div class="small-2 large-1 columns" <a><i class="fa fa-trash-o" style="color: red;" ng-click="deleteCategory(category)"></i></a>
          <a><i class="fa fa-edit" ng-click="showEditInput(category)"></i></a>
        </div>
        <div class="small-10 large-11 columns">
          <span ng-show="!isEditingCategory[category['@id']]">{{category.label}}</span>
          <div class="row" ng-show="isEditingCategory[category['@id']]">
            <div ng-show="isEditingCategory[category['@id']]" class="large-12 columns">
              <div class="row collapse">
                <div class="small-10 columns">
                  <input type="text" ng-model="category.label" ng-keypress="$event.keyCode === 13 ? isEditingCategory[category['@id']] = false : null">
                </div>
                <div class="small-2 columns">
                  <button class="button postfix" ng-click="isEditingCategory[category['@id']] = false">Done</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <span ng-if="!item.categoryList.length">(no categories defined yet)</span>
      <div class="row">
        <div class="large-12 columns">
          <div class="row collapse">
            <div class="small-8 columns">
              <input ng-model="newCategory.categoryLabel" ng-keypress="addCategoryEnterKey($event,
  newCategory)">
            </div>
            <div class="small-4 columns">
              <button class="postfix" ng-disabled="cannotAddCategory(newCategory)" type="button"
                ng-click="addCategory(newCategory)">Add category</button>
            </div>
          </div>
        </div>
      </div>
      <span class="alert" ng-if="isDuplicateCategory(newCategory)">Duplicate category name</span>
    </div>
  </div>


  <div class="row" ng-if="item.measurementType !=='ontology:categorical'">
    <div class="large-9 columns">
      <label>Included result properties:</label>
      <span ng-show="!changeResultProperties" ng-repeat="resultProperty in item.selectedResultProperties">
        <strong>{{resultProperty.label}}{{$last ? '' : ', '}}</strong>
      </span>
      <result-properties ng-show="changeResultProperties" variable="item"></result-properties>
      <br>
      <button class="small" type="button" ng-click="changeResultProperties=!changeResultProperties">{{changeResultProperties ? 'Hide result properties' : 'Change'}}</button>
    </div>
  </div>

  <div class="row">
    <div class="large-9 columns">
      <label>Measurement moments</label>
      <subset-select target="item.measuredAtMoments" source="measurementMoments
 " equals="measurementMomentEquals"></subset-select>
    </div>
  </div>


  <div class="row">
    <div class="large-9 columns">
      <button class="success" type="button" ng-disabled="!item.label || !item.measurementType
  || isEditingItem" ng-click="editItem()">Edit
      </button>
    </div>
  </div>
  <a class="close-reveal-modal" ng-click="cancel()">&#215;</a>
</form>
