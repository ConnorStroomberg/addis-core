<ul class="breadcrumbs">
    <li><a ui-sref="projects">Projects</a></li>
    <li><a ui-sref="create-project">Datasets</a></li>
    <li><a ui-sref="namespace({namespaceUid: namespace.uid})">{{namespace.name}}</a></li>
    <li class="current active">{{studyDetails.name}}</li>
</ul>

<div class="row">
<div class="column large-12">
<h2>{{studyDetails.name}}</h2>

<p>
    <em>{{studyDetails.title}}</em>
</p>

<h5 class="subheader">Study details</h5>

<div class="panel">

    <div class="row property-section">


        <div class="column large-4">
            <div class="row property-row">
                <div class="column large-3">
                    <strong><span class="right">Indication</span></strong>
                </div>
                <div class="column large-9 end">
                    <span>{{studyDetails.indication}}</span>
                </div>
            </div>

            <div class="row property-row">
                <div class="column large-3">
                    <strong><span class="right">Allocation</span></strong>
                </div>
                <div class="column large-9 end">
                    <span>{{studyDetails.allocation}}</span>
                </div>
            </div>

            <div class="row property-row">
                <div class="column large-3">
                    <strong><span class="right">Blinding</span></strong>
                </div>
                <div class="column large-9 end">
                    <span>{{studyDetails.blinding}}</span>
                </div>
            </div>

            <div class="row property-row">
                <div class="column large-3">
                    <strong><span class="right">Size</span></strong>
                </div>
                <div class="column large-9 end">
                    <span>{{studyDetails.studySize}}</span>
                </div>
            </div>
        </div>

        <div class="column large-6 end">

            <div class="row property-row">
                <div class="column large-5">
                    <strong><span class="right">Number of study centers</span></strong>
                </div>
                <div class="column large-7">
                    <span>{{studyDetails.numberOfStudyCenters}}</span>
                    <span ng-show="!studyDetails.numberOfStudyCenters"><em>not availiable</em></span>
                </div>
            </div>

            <div class="row property-row">
                <div class="column large-5">
                    <strong><span class="right">Dosing</span></strong>
                </div>
                <div class="column large-7">
                    <span>{{studyDetails.dosing}}</span>
                </div>
            </div>

            <div class="row property-row">
                <div class="column large-5">
                    <strong><span class="right">Number of arms</span></strong>
                </div>
                <div class="column large-7">
                    <span>{{studyDetails.numberOfArms}}</span>
                </div>
            </div>

            <div class="row property-row">
                <div class="column large-5">
                    <strong><span class="right">Investigational drugs</span></strong>
                </div>
                <div class="column large-7">
                    <span>{{studyDetails.investigationalDrugNames}}</span>
                </div>
            </div>
        </div>
    </div>

    <div class="row property-section">
        <div class="column large-4">
            <div class="row property-row">
                <div class="column large-3">
                    <strong><span class="right">Status</span></strong>
                </div>
                <div class="column large-9 end">
                    <span>{{studyDetails.status}}</span>
                </div>
            </div>
            <div class="row property-row">
                <div class="column large-3">
                    <strong><span class="right">Start date</span></strong>
                </div>
                <div class="column large-9 end">
                    <span ng-show="studyDetails.startDate">{{studyDetails.startDate.millis | date:'yyyy-MM-dd'}}</span>
                    <span ng-show="!studyDetails.startDate"><em>not availiable</em></span>
                </div>
            </div>
            <div class="row property-row">
                <div class="column large-3">
                    <strong><span class="right">End date</span></strong>
                </div>
                <div class="column large-9">
                    <span ng-show="studyDetails.startDate">{{studyDetails.endDate.millis | date:'yyyy-MM-dd'}}</span>
                    <span ng-show="!studyDetails.startDate"><em>not availiable</em></span>
                </div>
            </div>
        </div>
        <div class="column large-6 end">
            <div class="row property-row">
                <div class="column large-5">
                    <strong><span class="right">Pubmed links</span></strong>
                </div>
                <div class="column large-7 end">
                    <div ng-repeat="uri in studyDetails.pubmedUrls | splitOnTokenFilter">
                        <a target="_blank" ng-href={{uri}}>{{uri}}</a>

                        <div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>


<div class="row property-section">
    <h5 class="subheader">Study design</h5>

    <!--    <div class="column large-12">
           <table>
               <thead>
               <tr>
                   <th>Arms</th>
                   <th>Number of participants starting</th>
               </tr>
               </thead>
               <tbody>
               <tr ng-repeat="arm in studyArms">
                   <td>{{arm.armLabel}}</td>
                   <td class="text-center">{{arm.numberOfParticipantsStarting}}</td>
               </tr>
               </tbody>
           </table>
       </div>

       <div class="column large-12">
           <table>
               <thead>
               <tr>
                   <th>Epochs</th>
                   <th>Duration</th>
               </tr>
               </thead>
               <tbody>
               <tr ng-repeat="epoch in studyEpochs">
                   <td>{{epoch.label}}</td>
                   <td class="text-center">{{epoch.duration | durationFilter}}</td>
               </tr>
               </tbody>
           </table>
       </div> -->

    <div id="study-design-table" class="column large-12">
        <table>
            <thead>
            <tr>
                <th>Arms</th>
                <th>Participants starting</th>
                <th ng-repeat="epoch in studyEpochs">
                    {{epoch.label}}
                    <span ng-show="epoch.duration">({{epoch.duration | durationFilter}})</span>
                </th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="arm in studyArms">
                <td>{{arm.armLabel}}</td>
                <td class="text-center">{{arm.numberOfParticipantsStarting}}</td>
                <td ng-repeat="epoch in studyEpochs">
                    <span ng-show="cellTreatments(epoch.epochUid, arm.armUid)[0].administeredDrugs.length === 0">
                        <div>{{cellTreatments(epoch.epochUid, arm.armUid)[0].treatmentActivityType |
                            activityTypeFilter}}
                        </div>
                    </span>
                    <span ng-show="cellTreatments(epoch.epochUid, arm.armUid)[0].administeredDrugs.length !== 0">
                        <div ng-repeat="administeredDrug in cellTreatments(epoch.epochUid, arm.armUid)[0].administeredDrugs">
                            {{administeredDrug.drugLabel}}
                            <span ng-show="administeredDrug.minValue">
                                ( {{administeredDrug.minValue}} - {{administeredDrug.maxValue}} {{administeredDrug.minUnitLabel}} {{administeredDrug.minDosingPeriodicity | durationFilter}} )
                            </span>
                            <span ng-show="administeredDrug.fixedValue">( {{administeredDrug.fixedValue}} {{administeredDrug.fixedUnitLabel}} {{administeredDrug.fixedDosingPeriodicity | durationFilter}} )
                            </span>
                        </div>
                    </span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="row property-section">
    <h5 class="subheader">Study data</h5>


</div>


</div>
</div>
