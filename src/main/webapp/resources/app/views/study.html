<ul class="breadcrumbs">
    <li><a ui-sref="projects">Projects</a></li>
    <li><a ui-sref="create-project">Datasets</a></li>
    <li><a ui-sref="namespace({namespaceUid: namespace.uid})">{{namespace.name}}</a></li>
    <li class="current active">{{studyDetails.name}}</li>
</ul>

<div class="row">
<div class="column large-12">
<h2>{{studyDetails.name}}</h2>

<p>
    <em>{{studyDetails.title}}</em>
</p>

<h5 class="subheader">Study details</h5>

<div class="panel">

    <div class="row property-section">


        <div class="column large-4">
            <div class="row property-row">
                <div class="column large-3">
                    <strong><span class="right">Indication</span></strong>
                </div>
                <div class="column large-9 end">
                    <span>{{studyDetails.indication}}</span>
                </div>
            </div>

            <div class="row property-row">
                <div class="column large-3">
                    <strong><span class="right">Allocation</span></strong>
                </div>
                <div class="column large-9 end">
                    <span>{{studyDetails.allocation}}</span>
                </div>
            </div>

            <div class="row property-row">
                <div class="column large-3">
                    <strong><span class="right">Blinding</span></strong>
                </div>
                <div class="column large-9 end">
                    <span>{{studyDetails.blinding}}</span>
                </div>
            </div>

            <div class="row property-row">
                <div class="column large-3">
                    <strong><span class="right">Size</span></strong>
                </div>
                <div class="column large-9 end">
                    <span>{{studyDetails.studySize}}</span>
                </div>
            </div>
        </div>

        <div class="column large-6 end">

            <div class="row property-row">
                <div class="column large-5">
                    <strong><span class="right">Number of study centers</span></strong>
                </div>
                <div class="column large-7">
                    <span>{{studyDetails.numberOfStudyCenters}}</span>
                    <span ng-show="!studyDetails.numberOfStudyCenters"><em>not available</em></span>
                </div>
            </div>

            <div class="row property-row">
                <div class="column large-5">
                    <strong><span class="right">Dosing</span></strong>
                </div>
                <div class="column large-7">
                    <span>{{studyDetails.dosing}}</span>
                </div>
            </div>

            <div class="row property-row">
                <div class="column large-5">
                    <strong><span class="right">Number of arms</span></strong>
                </div>
                <div class="column large-7">
                    <span>{{studyDetails.numberOfArms}}</span>
                </div>
            </div>

            <div class="row property-row">
                <div class="column large-5">
                    <strong><span class="right">Investigational drugs</span></strong>
                </div>
                <div class="column large-7">
                    <span>{{studyDetails.investigationalDrugNames}}</span>
                </div>
            </div>
        </div>
    </div>

    <div class="row property-section">
        <div class="column large-4">
            <div class="row property-row">
                <div class="column large-3">
                    <strong><span class="right">Status</span></strong>
                </div>
                <div class="column large-9 end">
                    <span>{{studyDetails.status}}</span>
                </div>
            </div>
            <div class="row property-row">
                <div class="column large-3">
                    <strong><span class="right">Start date</span></strong>
                </div>
                <div class="column large-9 end">
                    <span ng-show="studyDetails.startDate">{{studyDetails.startDate.millis | date:'yyyy-MM-dd'}}</span>
                    <span ng-show="!studyDetails.startDate"><em>not available</em></span>
                </div>
            </div>
            <div class="row property-row">
                <div class="column large-3">
                    <strong><span class="right">End date</span></strong>
                </div>
                <div class="column large-9">
                    <span ng-show="studyDetails.startDate">{{studyDetails.endDate.millis | date:'yyyy-MM-dd'}}</span>
                    <span ng-show="!studyDetails.startDate"><em>not available</em></span>
                </div>
            </div>
        </div>
        <div class="column large-6 end">
            <div class="row property-row">
                <div class="column large-5">
                    <strong><span class="right">Pubmed links</span></strong>
                </div>
                <div class="column large-7 end">
                    <div ng-repeat="uri in studyDetails.pubmedUrls | splitOnTokenFilter">
                        <a target="_blank" ng-href={{uri}}>{{uri}}</a>
                    </div>
                    <span ng-show="!studyDetails.pubmedUrls.length"><em>no links available</em></span>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="row property-section">
    <h5 class="subheader">Study design</h5>

    <div id="study-design-table" class="column large-12">
        <table>
            <thead>
            <tr>
                <th>Arms</th>
                <th>Participants starting</th>
                <th ng-repeat="epoch in studyEpochs">
                    {{epoch.label}}
                    <span ng-show="epoch.duration">({{epoch.duration | durationFilter}})</span>
                </th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="row in designRows">
                <td>{{row.armLabel}}</td>
                <td class="text-center">{{row.numberOfParticipantsStarting}}</td>
                <td ng-repeat="cell in row.epochCells">
                    <span ng-show="cell.administeredDrugs.length === 0">
                        <div>{{cell.treatmentActivityType |
                            ontologyFilter |activityTypeFilter}}
                        </div>
                    </span>
                    <span ng-show="cell.administeredDrugs.length !== 0">
                        <div ng-repeat="drug in cell.administeredDrugs">
                            {{drug.drugLabel}}
                            <span ng-show="drug.minValue">
                                ( {{drug.minValue}} - {{drug.maxValue}} {{drug.minUnitLabel}} {{drug.minDosingPeriodicity | durationFilter}} )
                            </span>
                            <span ng-show="drug.fixedValue">( {{drug.fixedValue}} {{drug.fixedUnitLabel}} {{drug.fixedDosingPeriodicity | durationFilter}} )
                            </span>
                        </div>
                    </span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="row property-section">
    <h5 class="subheader">Population characteristics</h5>

    <div class="column large-12">

        <table id="population-characteristics-table">
            <thead>
            <tr>
                <th>Population characaristic</th>
                <th>Measurement moment</th>
                <th ng-repeat="dataArmValue in studyPopulationCharacteristics[0].studyDataMoments[0].studyDataArmValues">
                    {{dataArmValue.armLabel}}
                </th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="row in populationCharacteristicsRows">
                <td>{{row.studyDataTypeLabel}}</td>
                <td>
                    {{row.timeOffsetDuration | durationOffsetFilter}}
                    {{row.relativeToEpochLabel}}
                    {{row.relativeToAnchorOntology | ontologyFilter | anchorEpochFilter}}
                </td>
                <td ng-repeat="dataArmValue in row.studyDataArmValues">
                    <span ng-show="dataArmValue.mean">{{dataArmValue.mean}}</span>
                    <span ng-show="dataArmValue.mean">&plusmn; {{dataArmValue.std}}</span>
                    <span ng-show="dataArmValue.count">{{dataArmValue.count}}</span>
                    <span ng-show="dataArmValue.sampleSize && dataArmValue.count"> / {{dataArmValue.sampleSize}}</span>
                    <span ng-show="dataArmValue.sampleSize && dataArmValue.mean">({{dataArmValue.sampleSize}})</span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="row property-section">
    <h5 class="subheader">Endpoints</h5>

    <div class="column large-12">

        <table>
            <thead id="adverseEvents-table">
            <tr>
                <th>Endpoints</th>
                <th>Measurement moment</th>
                <th ng-repeat="dataArmValue in studyEndpoints[0].studyDataMoments[0].studyDataArmValues">
                    {{dataArmValue.armLabel}}
                </th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="row in endpointRows">
                <td>{{row.studyDataTypeLabel}}</td>
                <td>
                    {{row.timeOffsetDuration | durationOffsetFilter}}
                    {{row.relativeToEpochLabel}}
                    {{row.relativeToAnchorOntology | ontologyFilter | anchorEpochFilter}}
                </td>
                <td ng-repeat="dataArmValue in row.studyDataArmValues">
                    <span ng-show="dataArmValue.mean">{{dataArmValue.mean}}</span>
                    <span ng-show="dataArmValue.mean">&plusmn; {{dataArmValue.std}}</span>
                    <span ng-show="dataArmValue.count || (dataArmValue.count === 0)">{{dataArmValue.count}}</span>
                    <span ng-show="dataArmValue.sampleSize && dataArmValue.count || (dataArmValue.count === 0)"> / {{dataArmValue.sampleSize}}</span>
                    <span ng-show="dataArmValue.sampleSize && dataArmValue.mean">({{dataArmValue.sampleSize}})</span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="row property-section">
    <h5 class="subheader">Adverse events</h5>

    <div class="column large-12">

        <table>
            <thead id="adverse-events-table">
            <tr>
                <th>AdverseEvents</th>
                <th>Measurement moment</th>
                <th ng-repeat="dataArmValue in studyAdverseEvents[0].studyDataMoments[0].studyDataArmValues">
                    {{dataArmValue.armLabel}}
                </th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="row in adverseEventsRows">
                <td>{{row.studyDataTypeLabel}}</td>
                <td>
                    {{row.timeOffsetDuration | durationOffsetFilter}}
                    {{row.relativeToEpochLabel}}
                    {{row.relativeToAnchorOntology | ontologyFilter | anchorEpochFilter}}
                </td>
                <td ng-repeat="dataArmValue in row.studyDataArmValues">
                    <span ng-show="dataArmValue.mean">{{dataArmValue.mean}}</span>
                    <span ng-show="dataArmValue.mean">&plusmn; {{dataArmValue.std}}</span>
                    <span ng-show="dataArmValue.count || (dataArmValue.count === 0)">{{dataArmValue.count}}</span>
                    <span ng-show="dataArmValue.sampleSize && dataArmValue.count || (dataArmValue.count === 0)"> / {{dataArmValue.sampleSize}}</span>
                    <span ng-show="dataArmValue.sampleSize && dataArmValue.mean">({{dataArmValue.sampleSize}})</span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>


</div>
</div>
