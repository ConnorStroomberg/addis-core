<ul ng-show="loading.loaded" class="breadcrumbs">
  <li><a href="#/projects">Projects</a></li>
  <li class="current active">{{project.name}}</li>
</ul>

<div class="project-header row">
  <div class="columns large-12">
    <h1 class="inline-header" title="Project title">{{project.name}}</h1>

    <h3 class="subheader inline-header" title="Trialverse namespace">/ {{trialverse.name}}</h3>

    <div class="row">
      <div class="columns large-6 small-12">
        <p class="project-description" title="Project description">{{project.description}}</p>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <!-- Outcomes -->
  <div class="nested-view columns large-6 border">
    <div class="nested-view-header row">
      Outcomes
      <button ng-show="editMode.allowEditing" class="small" ng-click="createOutcomeModal.open()"><i
          class="fa fa-plus"></i> Add outcome
      </button>
    </div>
    <ul class="no-bullet">
      <li data-tooltip class="row colored-row has-tip" ng-repeat="outcome in outcomes"
          title="{{outcome.motivation}}">
        <span class="columns large-6">{{outcome.name}} </span>
        <span class="columns large-6">{{outcome.semanticOutcomeLabel}} </span>
      </li>
    </ul>
  </div>

  <!-- Interventions -->
  <div class="nested-view columns large-6 border">
    <div class="nested-view-header row">
      Interventions
      <button ng-show="editMode.allowEditing" class="small" ng-click="createInterventionModal.open()"><i
          class="fa fa-plus"></i> Add intervention
      </button>
    </div>
    <ul class="no-bullet">
      <li data-tooltip class="row colored-row has-tip" ng-repeat="intervention in interventions"
          title="{{intervention.motivation}}">
        <span class="columns large-6">{{intervention.name}} </span>
        <span class="columns large-6">{{intervention.semanticInterventionLabel}} </span>
      </li>
    </ul>
  </div>

</div>

<!-- analyses -->
<div class="row">
  <div class="columns large-12 border">
    Analyses
    <button ng-show="editMode.allowEditing" class="small" ng-click="createAnalysisModal.open()"><i
        class="fa fa-plus"></i> Add Analysis
    </button>
  </div>
  <ul class="no-bullet">
    <li class="row colored-row" ng-repeat="analysis in analyses">
      <a href="#/projects/{{project.id}}/analyses/{{analysis.id}}">
        <span class="columns large-4">{{analysis.name}} </span>
        <span class="columns large-4">{{analysis.analysisType}} </span>
        <span class="columns large-4">{{analysis.study}} </span>
      </a>
    </li>
  </ul>
</div>


<!-- Outcomes modal -->
<modal model="createOutcomeModal">
  <h3>Add a new outcome</h3>

  <form name="outcomeForm" ng-submit="createOutcome(model)">
    <div class="row">
      <div class="large-4 columns">
        <label>Name
          <input type="text" ng-model="model.name">
        </label>
      </div>
    </div>
    <div class="row">
      <div class="large-6 columns">
        <label>Motivation
          <textarea rows="4" ng-model="model.motivation"></textarea>
        </label>
      </div>
    </div>
    <div class="row">
      <div class="large-6 columns">
        <label>Semantic outcome
          <select ng-model="model.semanticOutcome"
                  ng-options="semanticOutcome as semanticOutcome.label for semanticOutcome in semanticOutcomes | orderBy:'label'"></select>
        </label>
      </div>
    </div>
    <div class="row">
      <ul class="button-group">
        <li>
          <button class="button small secondary" ng-click="createOutcomeModal.close()">Cancel</button>
        </li>
        <li>
          <button class="button small success" ng-disabled="!model.name || !model.semanticOutcome"
                  ng-click="addOutcome(model)">Add outcome
          </button>
        </li>
      </ul>
    </div>
  </form>
</modal>

<!-- Interventions modal -->
<modal model="createInterventionModal">
  <h3>Add a new intervention</h3>

  <form name="interventionForm" ng-submit="createIntervention(model)">
    <div class="row">
      <div class="large-4 columns">
        <label>Name
          <input type="text" ng-model="model.name">
        </label>
      </div>
    </div>
    <div class="row">
      <div class="large-6 columns">
        <label>Motivation
          <textarea rows="4" ng-model="model.motivation"></textarea>
        </label>
      </div>
    </div>
    <div class="row">
      <div class="large-6 columns">
        <label>Semantic intervention
          <select ng-model="model.semanticIntervention"
                  ng-options="semanticIntervention as semanticIntervention.label for semanticIntervention in semanticInterventions | orderBy:'label'"></select>
        </label>
      </div>
    </div>
    <div class="row">
      <ul class="button-group">
        <li>
          <button class="button small secondary" ng-click="createInterventionModal.close()">Cancel</button>
        </li>
        <li>
          <button type="submit" class="button small success" ng-disabled="!model.name || !model.semanticIntervention"
                  ng-click="addIntervention(model)">Add intervention
          </button>
        </li>
      </ul>
    </div>
  </form>
</modal>

<!-- Analyses modal -->
<modal model="createAnalysisModal">
  <h3>Add a new analysis</h3>

  <form name="analysisForm" ng-submit="addAnalysis(model)">
    <div class="row">
      <div class="large-4 columns">
        <label>Name
          <input type="text" ng-model="model.name">
        </label>
      </div>
    </div>
    <div class="row">
      <div class="large-6 columns">
        <label>Type
          <select ng-init="model.type=analysisTypes[0].label" ng-model="model.type"
                  ng-options="type.label as type.label for type in analysisTypes"></select>
        </label>
      </div>
    </div>
    <div class="row">
      <ul class="button-group">
        <li>
          <button class="button small secondary" ng-click="createAnalysisModal.close()">Cancel</button>
        </li>
        <li>
          <button type="submit" class="button small success" ng-disabled="!model.name || !model.type"
                  ng-click="addAnalysis(model)">Add analysis
          </button>
        </li>
      </ul>
    </div>
  </form>
</modal>
